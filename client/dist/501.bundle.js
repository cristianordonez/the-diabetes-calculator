"use strict";(self.webpackChunkthe_diabetes_calculator=self.webpackChunkthe_diabetes_calculator||[]).push([[501],{3147:(e,t,n)=>{var a=n(5318);t.Z=void 0;var r=a(n(4938)),l=n(5893),i=(0,r.default)((0,l.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonth");t.Z=i},7069:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(3946),r=n(7349),l=n(3882);function i(e,t){(0,l.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.Z)(e,-n)}},8801:(e,t,n)=>{n.d(t,{h:()=>v});var a=n(7294),r=n(6501),l=n(5295),i=n(4563),s=n(6867),o=n(4962),c=n(2643),u=n(2658),m=n(6447),d=n(9161),p=n(6914),f=n(3343),v=function(e){var t,n,v,y,h=e.route,E=e.image,g=e.title,b=e.restaurantChain,Z=e.nutrition,M=e.url,w=e.handleOpeningDialog,D=e.isMealPlanItem,I=e.servings;return void 0!==Z&&"recipes"===h||"RECIPE"===h?Z.nutrients.forEach((function(e){"Calories"===e.name?t=Math.floor(Z.nutrients[0].amount):"Protein"===e.name?y=Math.floor(Z.nutrients[1].amount)+"g":"Fat"===e.name?v=Math.floor(Z.nutrients[1].amount):"Carbohydrates"===e.name&&(n=Math.floor(Z.nutrients[3].amount)+"g")})):void 0!==Z&&(t=Z.calories,y=Z.protein,v=Z.fat,n=Z.carbs),a.createElement(r.Z,{elevation:1,className:"food-search-paper"},a.createElement(l.Z,{className:"search-item","data-testid":"food-search-item"},D&&void 0!==w?a.createElement(i.Z,{title:"Delete from Mealplan"},a.createElement(s.Z,{sx:{position:"absolute",alignSelf:"flex-end"},size:"small",color:"error","aria-label":"delete from mealplan",onClick:w},a.createElement(f.Z,null))):null,a.createElement(o.Z,{component:"img",alt:"food item image",height:"160",image:E}),a.createElement(c.Z,null,a.createElement(u.Z,{align:"center",noWrap:!0,variant:"subtitle1"},g),D&&void 0!==I?a.createElement(m.Z,{direction:"row"},a.createElement(u.Z,{variant:"subtitle2"},"Servings: ",I)):null,"menuItems"===h||"MENU_ITEM"===h?a.createElement(u.Z,{variant:"subtitle2"},b):null,void 0!==Z?a.createElement("div",{className:"search-item-nutrition"},a.createElement("div",{className:"search-item-nutrient"},a.createElement(u.Z,{variant:"subtitle2"},a.createElement("strong",null,"Calories")),a.createElement(u.Z,{variant:"body1"},t)),a.createElement("div",{className:"search-item-nutrient"},a.createElement(u.Z,{variant:"subtitle2"},a.createElement("strong",null,"Carbs")),a.createElement(u.Z,{variant:"body1"},n)),a.createElement("div",{className:"search-item-nutrient"},a.createElement(u.Z,{variant:"subtitle2"},a.createElement("strong",null,"Protein")),a.createElement(u.Z,{variant:"body1"},y)),a.createElement("div",{className:"search-item-nutrient"},a.createElement(u.Z,{variant:"subtitle2"},a.createElement("strong",null,"Fat")),a.createElement(u.Z,{variant:"body1"},v))):null),a.createElement(d.Z,{sx:{display:"flex"}},void 0!==M?a.createElement(p.Z,{fullWidth:!0,component:"a",href:M,target:"_blank",className:"card-button",variant:"outlined",color:"secondary",size:"small"},"View Recipe"):null,D?null:a.createElement(p.Z,{fullWidth:!0,className:"card-button",onClick:w,variant:"outlined",size:"small","data-testid":"open-addtomealplan-dialog"},"Add to Mealplan"))))}},7204:(e,t,n)=>{n.d(t,{b:()=>c});var a=n(7294),r=n(6501),l=n(584),i=n(8779),s=n(7090),o=n(2658),c=function(e){var t=e.currentDay,n=(0,i.Z)((0,l.Z)(new Date(t)),"MMMM dd, yyyy"),c=(0,i.Z)((0,s.Z)(new Date(t)),"MMMM dd, yyyy");return a.createElement(a.Fragment,null,a.createElement(r.Z,{className:"mealplan-week-text",color:"secondary"},a.createElement(o.Z,{variant:"body1"},"Viewing Week:"),a.createElement(o.Z,{variant:"body1"},n),a.createElement(o.Z,{variant:"body1"},"-"),a.createElement(o.Z,{variant:"body1"},c)))}},6162:(e,t,n)=>{n.d(t,{y:()=>r});var a=n(6974),r=function(){return(0,a.bx)()}},4501:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var a=n(7294),r=n(7610),l=n(2856),i=n(7383),s=n(5842),o=n(9226),c=n(4659),u=n(466),m=n(8779),d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)},p=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function s(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}o((a=a.apply(e,t||[])).next())}))},f=function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},v=function(e){var t=e.currentDay,n=e.setCurrentDay,v=e.setBreakfastItems,y=e.setLunchItems,h=e.setDinnerItems,E=e.setDayIndex,g=e.value,b=e.setValue,Z=function(e){return p(void 0,void 0,void 0,(function(){return f(this,(function(t){return E((0,u.Z)(e)),v([]),y([]),h([]),b(e),n((0,m.Z)(e,"yyyy-MM-dd")),[2]}))}))};return a.createElement(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},a.createElement(l._,{dateAdapter:r.Z},a.createElement(o.Z,{sx:{display:{xs:"block",sm:"none"}}},a.createElement(s.O,{label:"Current Date",inputFormat:"MM/dd/yyyy",value:t,onChange:Z,renderInput:function(e){return a.createElement(c.Z,d({},e,{variant:"standard"}))}})),a.createElement(o.Z,{sx:{display:{xs:"none",sm:"block"}}},a.createElement(i.$,{label:"Current Date",inputFormat:"MM/dd/yyyy","data-testid":"date-picker-textfield",value:g,onChange:Z,renderInput:function(e){return a.createElement(c.Z,d({},e,{variant:"standard"}))}}))))},y=n(6447),h=n(2658),E=n(4666),g=n(7645),b=n(6755),Z=n(8979),M=n(6914),w=n(9669),D=n.n(w),I=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function s(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}o((a=a.apply(e,t||[])).next())}))},x=function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},A=function(e){var t=e.shoppingListId,n=e.openDialog,r=e.setMealPlanItems,l=e.currentDay,i=e.setOpenDialog,s=e.handleOpeningDialog,c=e.setOpenAlert,u=e.setAlertSeverity,m=e.setAlertMessage;return a.createElement(a.Fragment,null,a.createElement(E.Z,{open:n},a.createElement(g.Z,null,"Are you sure you want to delete this item from your mealplan?"),a.createElement("form",{onSubmit:function(e){return I(void 0,void 0,void 0,(function(){var n,a,s;return x(this,(function(o){switch(o.label){case 0:e.preventDefault(),o.label=1;case 1:return o.trys.push([1,7,,8]),[4,D().delete("/api/mealplan/delete/".concat(t))];case 2:o.sent(),i(!1),u("success"),m("Mealplan item has been deleted."),c(!0),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,D().get("/api/mealplan/day",{params:{date:l},withCredentials:!0})];case 4:return n=o.sent(),r(n.data.items),[3,6];case 5:return a=o.sent(),console.log(a),r([]),[3,6];case 6:return[3,8];case 7:return s=o.sent(),u("error"),m("Unable to delete mealplan item."),c(!0),i(!1),console.log(s),[3,8];case 8:return[2]}}))}))}},a.createElement(b.Z,null,a.createElement(o.Z,{display:"flex",flexDirection:"column",gap:"10px"})),a.createElement(Z.Z,null,a.createElement(M.Z,{onClick:s},"Cancel"),a.createElement(M.Z,{"data-testid":"add-mealplan-btn","aria-label":"submit form to add to meal plan",type:"submit"},"Delete")))))},k=n(8801),C=function(e){var t=e.type,n=e.id,r=e.shoppingListId,l=e.setMealPlanItems,i=e.currentDay,s=e.servings,o=e.title,c=e.setOpenAlert,u=e.setAlertSeverity,m=e.setAlertMessage,d=(0,a.useState)(null),p=d[0],f=d[1],v=(0,a.useState)(!1),y=v[0],h=v[1],E=function(){h(!y)};return(0,a.useEffect)((function(){var e="/api/recipes/".concat(n);"RECIPE"===t?e="/api/recipes/".concat(n):"PRODUCT"===t?e="/api/groceryProducts/".concat(n):"MENU_ITEM"===t&&(e="/api/menuItems/".concat(n)),D().get(e).then((function(e){f(e.data)})).catch((function(e){console.log(e)}))}),[n]),p?a.createElement(a.Fragment,null,a.createElement(k.h,{servings:s,route:t,image:null==p?void 0:p.image,title:o,restaurantChain:(null==p?void 0:p.restaurantChain)||void 0,nutrition:null==p?void 0:p.nutrition,url:(null==p?void 0:p.sourceUrl)||void 0,handleOpeningDialog:E,isMealPlanItem:!0}),a.createElement(A,{setMealPlanItems:l,currentDay:i,setOpenAlert:c,setAlertSeverity:u,setAlertMessage:m,shoppingListId:r,openDialog:y,setOpenDialog:h,handleOpeningDialog:E})):a.createElement("div",null,"Loading...")},S=function(e){var t=e.meals,n=e.setOpenAlert,r=e.setAlertSeverity,l=e.setAlertMessage,i=e.setMealPlanItems,s=e.currentDay;return a.createElement(a.Fragment,null,a.createElement("div",{className:"outer-container"},a.createElement("div",{className:"slider-container"},a.createElement("div",{id:"slider"},t.map((function(e,t){return a.createElement("div",{className:"slider-card",key:t},a.createElement(C,{type:e.type,id:e.value.id,shoppingListId:e.id,servings:e.value.servings,title:e.value.title,setOpenAlert:n,setAlertSeverity:r,setAlertMessage:l,setMealPlanItems:i,currentDay:s}))}))))))},O=function(e){var t=e.mealplanItems,n=e.setMealPlanItems,r=e.setOpenAlert,l=e.setAlertSeverity,i=e.setAlertMessage,s=e.currentDay;if(t.length){var o=[],c=[],u=[];return t.forEach((function(e){1===e.slot?o.push(e):2===e.slot?c.push(e):u.push(e)})),a.createElement(a.Fragment,null,a.createElement(y.Z,{direction:"column",sx:{height:"100%",width:"100%"}},a.createElement(h.Z,{variant:"h3",align:"center"},"Morning"),a.createElement(S,{meals:o,setOpenAlert:r,setAlertSeverity:l,setAlertMessage:i,setMealPlanItems:n,currentDay:s})),a.createElement(y.Z,{direction:"column",sx:{height:"100%",width:"100%"}},a.createElement(h.Z,{variant:"h3",align:"center"},"Afternoon"),a.createElement(S,{meals:c,setOpenAlert:r,setAlertSeverity:l,setAlertMessage:i,setMealPlanItems:n,currentDay:s})),a.createElement(y.Z,{direction:"column",sx:{height:"100%",width:"100%"}},a.createElement(h.Z,{variant:"h3",align:"center"},"Evening"),a.createElement(S,{meals:u,setOpenAlert:r,setAlertSeverity:l,setAlertMessage:i,setMealPlanItems:n,currentDay:s})))}return a.createElement(a.Fragment,null,a.createElement(h.Z,{variant:"h3"},"Morning"),a.createElement(h.Z,{variant:"h3"},"Afternoon"),a.createElement(h.Z,{variant:"h3"},"Evening"))},P=n(7204),N=n(4386),F=n(6867),z=n(4656),L=n(2640),T=n(7349),V=n(7069),_=n(3379),H=n(1566),U=n(3147),W=n(6162),j=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function s(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}o((a=a.apply(e,t||[])).next())}))},B=function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},R=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,l=t.length;r<l;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},G=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];const Y=function(){var e=(0,H.a)(),t=e.isLoading,n=(e.isLoggedin,(0,a.useState)((0,u.Z)(Date.now()))),r=n[0],l=n[1],i=a.useState(new Date(Date.now())),s=i[0],o=i[1],c=(0,W.y)(),d=c.handleDrawerToggle,p=c.setAlertMessage,f=c.setOpenAlert,E=c.setAlertSeverity,g=c.setNutritionSummary,b=c.setMealplanItemsFound,Z=c.setMealplanItems,M=c.currentDay,w=c.setCurrentDay,I=c.mealplanItems,x=c.setBreakfastItems,A=c.setLunchItems,k=c.setDinnerItems,C=c.breakfastItems,S=c.lunchItems,Y=c.dinnerItems;(0,a.useEffect)((function(){$()}),[M]);var $=function(){return j(void 0,void 0,void 0,(function(){var e,t;return B(this,(function(n){switch(n.label){case 0:Z([]),g([]),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D().get("/api/mealplan/day",{params:{date:M},withCredentials:!0})];case 2:return e=n.sent(),g(e.data.nutritionSummary.nutrients),Z(e.data.items),e.data.items.forEach((function(e){if(1===e.slot){var t=R(R([],C,!0),[e],!1);x(t)}else if(2===e.slot){var n=R(R([],S,!0),[e],!1);A(n)}else{var a=R(R([],Y,!0),[e],!1);k(a)}})),[3,4];case 3:return t=n.sent(),console.log(t),E("info"),p("You have no items saved on this day for your mealplan."),f(!0),b(!1),[3,4];case 4:return[2]}}))}))},q=function(e){var t=e.split("-");return{year:t[0],month:t[1],day:t[2]}};return a.createElement(a.Fragment,null,a.createElement("div",{className:"mealplan-page"},a.createElement(N.Z,{sx:{display:{sm:"none"},alignSelf:"flex-start"}},a.createElement(F.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,sx:{mr:2,display:{sm:"none"}}},a.createElement(_.Z,null))),a.createElement(P.b,{currentDay:M}),a.createElement("div",{className:"mealplan-page-main-content"},a.createElement(y.Z,{direction:"row",spacing:{xs:1,sm:4},alignItems:"space-evenly"},a.createElement(y.Z,{direction:"row",spacing:.5,sx:{width:"50%"}},a.createElement(U.Z,null),a.createElement(h.Z,{variant:"body1"},"View your daily meal plan items or begin to add items to your meal plan")),a.createElement(v,{setBreakfastItems:x,setLunchItems:A,setDinnerItems:k,currentDay:M,setCurrentDay:w,setDayIndex:l,value:s,setValue:o})),a.createElement("div",{className:"tabs-container"},a.createElement(z.Z,{value:r,onChange:function(e,t){Z([]),g([]);var n,a=t-r,i=q(M),s=i.year,c=i.month,u=i.day;a>0?n=(0,T.Z)(new Date("".concat(s,", ").concat(c,", ").concat(u)),a):a<0&&(n=(0,V.Z)(new Date("".concat(s,", ").concat(c,", ").concat(u)),Math.abs(a))),void 0!==n&&(o(n),l(t),w((0,m.Z)(n,"yyyy-MM-dd")))},variant:"scrollable",scrollButtons:"auto","aria-label":"change mealplan date"},G.map((function(e){return a.createElement(L.Z,{key:e,label:e})})))),t?null:a.createElement(O,{setMealPlanItems:Z,currentDay:M,mealplanItems:I,setOpenAlert:f,setAlertSeverity:E,setAlertMessage:p}))))}}}]);