"use strict";(self.webpackChunkthe_diabetes_calculator=self.webpackChunkthe_diabetes_calculator||[]).push([[407,566],{9125:(e,t,a)=>{a.d(t,{Z:()=>I});var n=a(7294),r=a(326),l=a(3720),o=a(4386),i=a(1508),c=a(2658),s=a(6867),u=a(4125),m=a(6447),d=a(1079),p=a(6914),g=a(4563),f=a(7109),h=a(4347),v=a(6974),E=a(9669),y=a.n(E),b=a(1566);const x=a.p+"99cd361417a5bcd8d2d7.svg";var Z=a(7859),k=a(2734),C=a(9879),_=a(7289),w=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function o(e){try{c(n.next(e))}catch(e){l(e)}}function i(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}))},M=function(e,t){var a,n,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},S=["Search","Macro Calculator","Meal Plan"];const I=function(e){var t=e.isSettingsPage,a=(0,v.TH)(),E=(0,k.Z)(),I=(0,n.useContext)(Z.k),G=(0,v.s0)(),L=(0,b.useAuth)(),T=(L.isLoading,L.isLoggedIn),P=L.username;console.log("username: ",P);var O=(0,n.useState)(!1),z=(O[0],O[1],n.useState(null)),F=z[0],N=z[1],A=n.useState(null),D=A[0],W=A[1],j=function(){N(null)},B=function(){return w(void 0,void 0,void 0,(function(){var e;return M(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),!0!==T?[3,2]:[4,y().post("/api/logout")];case 1:return t.sent(),G("/",{state:{loggedOut:!0},replace:!0}),[3,3];case 2:G("/"),t.label=3;case 3:return[3,5];case 4:return e=t.sent(),console.log("err:",e),[3,5];case 5:return[2]}}))}))};return n.createElement(l.Z,{position:"fixed",sx:{zIndex:function(e){return e.zIndex.drawer+1},boxShadow:"none",padding:"0 1vw"},color:"default",enableColorOnDark:!0},n.createElement(o.Z,{disableGutters:!0},n.createElement(i.Z,{component:"img",src:x,alt:"Logo",sx:{display:{md:"flex"},mr:1,objectFit:"contain",height:"2.5rem","&:hover":{cursor:"pointer"}},onClick:B}),n.createElement(c.Z,{variant:"h6",noWrap:!0,"data-testid":"navlink",onClick:B,sx:{mr:2,display:{xs:"none",md:"flex"},fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none",flexGrow:1,"&:hover":{cursor:"pointer"}}},"DiabetesCalculator"),!0===T?n.createElement(n.Fragment,null,n.createElement(i.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}}},n.createElement(s.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){N(e.currentTarget)},color:"inherit"},n.createElement(r.Z,null)),n.createElement(u.Z,{id:"menu-appbar",anchorEl:F,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(F),onClose:j,sx:{display:{xs:"block",md:"none"}}},n.createElement(m.Z,{direction:"column",sx:{padding:"0.5rem"}},S.map((function(e){return e.toLowerCase().replace(" ","")===a.pathname.slice(1)?n.createElement(d.Z,{onClick:j,key:e,underline:"hover",variant:"overline",href:"/".concat(e.toLowerCase().replace(/ /g,""))},e):n.createElement(d.Z,{onClick:j,key:e,underline:"hover",variant:"overline",color:"secondary",href:"/".concat(e.toLowerCase().replace(/ /g,""))},e)}))))),n.createElement(i.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},gap:2}},void 0!==t&&!0===t?n.createElement(p.Z,{variant:"text",onClick:function(){return history.back()}},"Go Back"):S.map((function(e){return e.toLowerCase().replace(" ","")===a.pathname.slice(1)?n.createElement(d.Z,{key:e,underline:"hover",variant:"overline",href:"/".concat(e.toLowerCase().replace(/ /g,""))},e):n.createElement(d.Z,{key:e,underline:"hover",variant:"overline",color:"secondary",href:"/".concat(e.toLowerCase().replace(/ /g,""))},e)}))),n.createElement(i.Z,{sx:{flexGrow:0}},n.createElement(g.Z,{title:"Open settings"},n.createElement(s.Z,{onClick:function(e){W(e.currentTarget)},sx:{p:0},"data-testid":"avatar"},n.createElement(f.Z,{alt:"Remy Sharp"}))),n.createElement(u.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:D,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(D),onClose:function(){W(null)}},n.createElement(h.Z,{onClick:function(){W(null),G("/settings")}},n.createElement(c.Z,{textAlign:"center"},"User Profile")),n.createElement(h.Z,{onClick:B,"data-testid":"logout-btn"},n.createElement(c.Z,{textAlign:"center"},"Logout"))))):n.createElement(d.Z,{href:"/login",underline:"hover","data-testid":"home-page",className:"navbar-login",variant:"overline",sx:{fontWeight:"bold",marginLeft:"auto"}},n.createElement(c.Z,{variant:"overline"},"Log in")),n.createElement(s.Z,{sx:{ml:1},onClick:I.toggleColorMode,color:"inherit","aria-label":"Toggle color theme"},"dark"===E.palette.mode?n.createElement(_.Z,null):n.createElement(C.Z,null))))}},3696:(e,t,a)=>{a.d(t,{I:()=>o});var n=a(7294),r=a(9986),l=a(6186),o=function(e){var t=e.openAlert,a=e.handleAlert,o=e.alertSeverity,i=e.alertMessage;return n.createElement(r.Z,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:t,autoHideDuration:8e3,onClose:a},n.createElement(l.Z,{onClose:a,severity:o,sx:{width:"100%"}},i))}},1380:(e,t,a)=>{a.d(t,{N:()=>E});var n=a(7294),r=a(2658),l=a(9062),o=a(6914),i=a(5295),c=a(2643),s=a(6447),u=a(9041),m=function(e){var t,a=e.nutrientsTotal,l=e.type,o=e.nutrientsInMealPlan;return void 0!==o&&(t=Math.floor(o/a*100)),n.createElement(n.Fragment,null,n.createElement(i.Z,null,n.createElement(c.Z,{sx:{display:"flex",flexDirection:"column",minWidth:"240px",flexGrow:"0",gap:"1rem"}},n.createElement(s.Z,{direction:"row",gap:"1rem",alignItems:"space-between"},n.createElement(r.Z,{align:"center",variant:"body1"},l),n.createElement(r.Z,{align:"center",variant:"body1",sx:{marginLeft:"auto"}},Math.floor(o)," / ",a," g")),n.createElement(u.Z,{variant:"determinate",value:t}))))},d=a(3981),p=function(){return p=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},p.apply(this,arguments)},g=function(e){var t=e.nutrientsTotal,a=e.IconSvg,l=e.type,o=e.page,s=e.setGoals,u=e.goals;return n.createElement(n.Fragment,null,n.createElement(i.Z,{sx:{borderRadius:"15%"}},n.createElement(c.Z,{sx:{display:"flex",flexDirection:"column",height:"10rem",width:"10rem",aligItems:"center",justifyContent:"center"}},n.createElement(a,{size:"1.5em",className:"goal-card-icon"}),"user-profile"===o?n.createElement(d.Z,{value:"".concat(t),type:"number",endAdornment:"g",fullWidth:!0,onInput:function(e){if(void 0!==s)if("Carbohydrates"===e.target.id){var t=parseInt(e.target.value),a=t<=15?0:t/3-5;s(p(p({},u),{total_carbohydrates:t,min_carbs_per_meal:Math.floor(a),max_carbs_per_meal:Math.floor(t/3+5)}))}else if("Protein"==e.target.id){var n=parseInt(e.target.value),r=n<=30?0:n/3-10;s(p(p({},u),{total_protein:n,min_protein_per_meal:Math.floor(r),max_protein_per_meal:Math.floor(n/3+10)}))}else if("Fat"===e.target.id){var l=parseInt(e.target.value),o=l<=30?0:l/3-10;s(p(p({},u),{total_fat:l,min_fat_per_meal:Math.floor(o),max_fat_per_meal:Math.floor(l/3+10)}))}},id:l,required:!0,inputProps:{style:{textAlign:"center"}}}):n.createElement(r.Z,{align:"center",variant:"h6"},t," g"),n.createElement(r.Z,{align:"center",variant:"body2"},l))))},f=a(3750),h=a(2585),v=a(9583),E=function(e){var t,a,i,c=e.goals,s=e.nutritionSummary,u=e.page,d=e.setGoals,p=e.handleSubmitUpdatedGoals;return void 0!==s&&s.length&&(a=s[5].amount,i=c.total_calories,t=Math.floor(a/i*100)),n.createElement(n.Fragment,null,n.createElement("div",{className:"daily-goals"},"mealplan"===u?n.createElement(r.Z,{variant:"h6"},"Today's Macronutrient Totals"):n.createElement(r.Z,{variant:"h6"},"Your Daily Macronutrient Goals"),"mealplan"===u&&void 0!==s&&s.length?n.createElement(n.Fragment,null,n.createElement("div",{className:"daily-goals-kcal"},n.createElement(l.Z,{variant:"determinate",size:200,value:t,thickness:1}),n.createElement("div",{className:"daily-goals-kcal-title"},n.createElement(r.Z,{variant:"body1",align:"center"},"Calories"),n.createElement(r.Z,{variant:"h6"},Math.floor(s[5].amount)," /"," ",c.total_calories))),n.createElement("div",{className:"daily-goals-items","data-testid":"mealplan-goal-items"},n.createElement(m,{type:"Carbohydrates",nutrientsInMealPlan:s[7].amount,nutrientsTotal:c.total_carbohydrates}),n.createElement(m,{nutrientsTotal:c.total_protein,type:"Protein",nutrientsInMealPlan:s[28].amount}),n.createElement(m,{nutrientsTotal:c.total_fat,type:"Fat",nutrientsInMealPlan:s[11].amount}))):null,"search"===u||"user-profile"===u||"mealplan"===u&&void 0!==c&&void 0!==s&&0===s.length?n.createElement(n.Fragment,null,n.createElement("div",{className:"daily-goals-kcal"},n.createElement(l.Z,{variant:"determinate",size:200,value:100,thickness:1}),n.createElement("div",{className:"daily-goals-kcal-title"},n.createElement(r.Z,{align:"center",variant:"body1"},"Total Calories"),n.createElement(r.Z,{align:"center",variant:"h6"},c.total_calories))),n.createElement("form",{onSubmit:p,className:"daily-goals-items"},n.createElement(g,{type:"Carbohydrates",IconSvg:v.xc8,nutrientsTotal:c.total_carbohydrates,page:u,setGoals:d,goals:c}),n.createElement(g,{nutrientsTotal:c.total_protein,IconSvg:f.OQT,type:"Protein",page:u,setGoals:d,goals:c}),n.createElement(g,{nutrientsTotal:c.total_fat,IconSvg:h.GRs,type:"Fat",page:u,setGoals:d,goals:c}),"user-profile"===u?n.createElement(o.Z,{variant:"contained",fullWidth:!0,type:"submit"},"Update Goals"):null)):null))}},1566:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s,useAuth:()=>c});var n=a(7294),r=a(9669),l=a.n(r),o=a(6974),i=(0,n.createContext)({isLoggedIn:!1,isLoading:!0,username:""}),c=function(){return(0,n.useContext)(i)};const s=function(e){var t=e.children,a=(0,o.s0)(),r=(0,n.useState)(!1),c=r[0],s=r[1],u=(0,n.useState)(!0),m=u[0],d=u[1],p=(0,n.useState)(""),g=p[0],f=p[1];return(0,n.useEffect)((function(){var e=l().get("/api/authentication");e.then((function(e){f(e.data),d(!1),s(!0),l().get("api/metrics").then((function(e){0===e.data.length&&a("/macrocalculator")})).catch((function(e){console.log(e)}))})),e.catch((function(e){d(!1),s(!1),a("/",{state:{showError:!1},replace:!0})}))}),[]),n.createElement(n.Fragment,null,n.createElement(i.Provider,{value:{isLoading:m,isLoggedIn:c,username:g}},t))}}}]);