"use strict";(self.webpackChunkthe_macro_trainer=self.webpackChunkthe_macro_trainer||[]).push([[979],{6540:(e,t,n)=>{var r=n(4836);t.Z=void 0;var a=r(n(4938)),o=n(5893),l=(0,a.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=l},336:(e,t,n)=>{var r=n(4836);t.Z=void 0;var a=r(n(4938)),o=n(5893),l=(0,a.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}),"RemoveCircle");t.Z=l},8991:(e,t,n)=>{var r=n(4836);t.Z=void 0;var a=r(n(4938)),o=n(5893),l=(0,a.default)((0,o.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4ZM4 16V6h16v10.01L4 16Zm5.0967-6.0469c0-1.027.836-1.864 1.864-1.864 1.027 0 1.864.837 1.864 1.864 0 1.027-.837 1.864-1.864 1.864-1.028 0-1.864-.837-1.864-1.864Zm7.032 4.236-2.482-2.482c.331-.505.527-1.107.527-1.754 0-1.772-1.441-3.213-3.213-3.213s-3.214 1.441-3.214 3.213 1.442 3.214 3.214 3.214c.636 0 1.225-.192 1.724-.511l2.489 2.488.955-.955Z"}),"ScreenSearchDesktop");t.Z=l},8878:(e,t,n)=>{n.d(t,{$:()=>l});var r=n(7888),a=n(2949),o=n(7294),l=function(e){var t=e.inputValue,n=e.handleNumberChange,l=e.label,i=e.id;return o.createElement(r.Z,{sx:{width:"100%"}},o.createElement(a.Z,{value:t,required:!0,id:i,label:l,type:"number",inputProps:{step:"0.1",lang:"en-US"},onChange:n,fullWidth:!0}))}},4030:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Re});var r=n(3379),a=n(8790),o=n(4384),l=n(130),i=n(9669),s=n.n(i),c=n(7294),u=n(9250),d=n(1275),m=n(724),h=n(7012),f=n(9144),p=n(1647),g=n(3785),y=n(6332),v=n(1898),b=function(e){var t=e.nutritionSummary,n=e.goals;return c.createElement("div",{className:"daily-goals"},c.createElement(p.Z,{variant:"h6"},"Today's Macronutrient Totals"),void 0!==t.total_calories?c.createElement(c.Fragment,null,c.createElement(y.G,{calories:parseInt(t.total_calories),goalCalories:n.total_calories}),c.createElement("div",{className:"daily-goals-items","data-testid":"foodLog-goal-items"},c.createElement(v.z,{type:"Carbohydrates",nutrientsInFoodLog:parseInt(t.total_carbohydrates),nutrientsTotal:n.total_carbohydrates}),c.createElement(v.z,{nutrientsInFoodLog:parseInt(t.total_protein),nutrientsTotal:n.total_protein,type:"Protein"}),c.createElement(v.z,{nutrientsTotal:n.total_fat,type:"Fat",nutrientsInFoodLog:parseInt(t.total_fat)}))):null)},E=n(6021),w=n(2085),S=function(e){var t=e.goals,n=e.handleSubmitUpdatedGoals;return c.createElement(c.Fragment,null,c.createElement("div",{className:"daily-goals"},c.createElement(p.Z,{variant:"h6"},"Your Daily Macronutrient Goals"),void 0!==t?c.createElement(c.Fragment,null,c.createElement(E.H,{goals:t}),c.createElement("form",{onSubmit:n,className:"daily-goals-items"},c.createElement(w.Y,{goals:t}))):null))},Z=n(727),x=function(e){var t,n=e.mobileOpen,r=e.handleDrawerToggle,a=e.searchResults,i=e.goals,s=e.isSearching,d=e.nutritionSummary,y=e.handleSubmit,v=e.values,E=e.setValues,w=e.setAlertMessage,x=e.setAlertSeverity,C=e.setIsSearching,D=e.setOpenAlert,A=e.setShowLoadMoreBtn,F=e.setSearchResults,k=e.setSendAdvancedRequest,I=(0,u.TH)();return t="/home"===I.pathname?"foodlog":"/home/search"===I.pathname?"search":"other",c.createElement(c.Fragment,null,c.createElement(c.Fragment,null,c.createElement(h.ZP,{variant:"temporary",open:n,onClose:r,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:350,pt:"1rem",pb:"1rem"}}},c.createElement(o.Z,null,c.createElement(l.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:r,sx:{mr:2,display:{sm:"none"}}},c.createElement(m.Z,null))),c.createElement(f.Z,{sx:{width:"100%",pb:"3rem"},direction:"row",spacing:2,justifyContent:"center",alignItems:"center"},c.createElement(Z.F,null)),"search"===t&&void 0!==a&&a.length>0?c.createElement(g.U,{handleSubmit:y,values:v,setValues:E,goals:i,setAlertMessage:w,setAlertSeverity:x,setIsSearching:C,setOpenAlert:D,setShowLoadMoreBtn:A,setSearchResults:F,setSendAdvancedRequest:k}):null," ","foodlog"!==t&&null!=a&&0===a.length?c.createElement(S,{goals:i}):null,"foodlog"===t&&void 0!==d?c.createElement(b,{goals:i,nutritionSummary:d}):null,"other"===t&&null!=a&&a.length>0?c.createElement(S,{goals:i}):null,s?c.createElement(p.Z,{align:"center",variant:"h6",sx:{pt:"1rem"}},"Searching..."):null),c.createElement(h.ZP,{open:!0,variant:"permanent",ModalProps:{keepMounted:!0},sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:350,pt:"1rem"}}},c.createElement(f.Z,{sx:{width:"100%",pb:"3rem"},direction:"row",spacing:2,justifyContent:"center",alignItems:"center"},c.createElement(Z.F,null)),"search"===t&&void 0!==a&&a.length>0?c.createElement(g.U,{handleSubmit:y,values:v,setValues:E,goals:i,setAlertMessage:w,setAlertSeverity:x,setIsSearching:C,setOpenAlert:D,setShowLoadMoreBtn:A,setSearchResults:F,setSendAdvancedRequest:k}):null," ","foodlog"!==t&&null!=a&&0===a.length?c.createElement(S,{goals:i}):null,"other"===t&&null!=a&&a.length>0?c.createElement(S,{goals:i}):null,"foodlog"===t&&void 0!==d?c.createElement(b,{goals:i,nutritionSummary:d}):null,s?c.createElement(p.Z,{align:"center",variant:"h6",sx:{pt:"1rem"}},"Searching..."):null)))},C=n(1566),D=n(3147),A=n(5293),F=n(214),k=n(7349),I=n(8779),M=n(466),_=n(3882),O=n(3946);var L=n(1646),N=n(8720),z=n(2949),P=n(2111),R=n(7044),j=n(2856),T=n(5842),q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},q.apply(this,arguments)},V=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},U=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},B=function(e){var t=e.currentDay,n=e.setCurrentDay,r=e.setDayIndex,a=e.value,o=e.setValue,l=function(e){return V(void 0,void 0,void 0,(function(){return U(this,(function(t){return r((0,M.Z)(e)),o(e),n((0,I.Z)(e,"yyyy-MM-dd")),[2]}))}))};return c.createElement(N.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},c.createElement(j._,{dateAdapter:P.H},c.createElement(N.Z,{sx:{display:{xs:"block",sm:"none"}}},c.createElement(T.O,{label:"Current Date",inputFormat:"MM/dd/yyyy",value:t,onChange:l,renderInput:function(e){return c.createElement(z.Z,q({},e,{variant:"standard"}))}})),c.createElement(N.Z,{sx:{display:{xs:"none",sm:"block"}}},c.createElement(R.$,{label:"Current Date",inputFormat:"MM/dd/yyyy","data-testid":"date-picker-textfield",value:a,onChange:l,renderInput:function(e){return c.createElement(z.Z,q({},e,{variant:"standard"}))}}))))},W=n(9620),G=n(7745),H=n(4498),Y=n(4373),$=n(2962),K=n(5305),J=function(e){var t=e.inputValue,n=e.handleInputChange,r=e.title,a=e.id,o=e.textFieldError;return c.createElement(c.Fragment,null,c.createElement(Y.Z,null),c.createElement(f.Z,{alignItems:"center",direction:"row",spacing:2,sx:{pl:"1rem",pr:"1rem"}},c.createElement(p.Z,{sx:{minWidth:"25%"},variant:"body2"},r),c.createElement(z.Z,{sx:{flexGrow:"1"},id:a,error:o,label:"Brand owner"===r?"Optional":"Required",value:t,required:"Brand owner"!==r,onChange:n})))},Q=n(8878),X=n(5722),ee=n(7888),te=n(1523),ne=function(e){var t=e.nutritionData,n=e.handleNutritionInput;return c.createElement(c.Fragment,null,c.createElement(X.Z,{elevation:5,sx:{width:"100%"}},c.createElement(p.Z,{variant:"h6",sx:{p:"1rem"}},"Nutrition Facts"),Object.keys(t).map((function(e,r){return c.createElement(c.Fragment,{key:r},c.createElement(Y.Z,null),c.createElement(f.Z,{flexGrow:1,alignItems:"center",justifyContent:"space-between",direction:"row",sx:{p:"1rem"}},"calories"===e||"total_carbohydrates"===e||"protein"===e||"total_fat"===e?c.createElement(c.Fragment,null,c.createElement(p.Z,{sx:{fontWeight:"bold"}},(0,te.i)(e)),c.createElement(ee.Z,{sx:{maxWidth:"40%"}},c.createElement(z.Z,{value:t["".concat(e)]+"",required:!0,id:e,label:"Required",type:"number",variant:"outlined",inputProps:{step:"0.1",lang:"en-US"},onChange:n,fullWidth:!0}))):c.createElement(c.Fragment,null,c.createElement(p.Z,{variant:"body2"},(0,te.i)(e)),c.createElement(ee.Z,{sx:{maxWidth:"40%"}},c.createElement(z.Z,{value:t["".concat(e)]+"",id:e,label:"Optional",type:"number",variant:"outlined",inputProps:{step:"0.1",lang:"en-US"},onChange:n,fullWidth:!0})))))}))))},re=n(8508),ae=n(2785),oe=n(5841),le=["g","mL"],ie=function(e){var t=e.handleSelectChange,n=e.servingSizeUnit;return c.createElement(ee.Z,{sx:{width:"100%"}},c.createElement(re.Z,null,"Unit"),c.createElement(ae.Z,{value:n,onChange:t,label:"Serving Size Unit",required:!0,fullWidth:!0,id:"serving_size_unit"},le.map((function(e){return c.createElement(oe.Z,{key:e,value:e},e)}))))},se=function(){return se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},se.apply(this,arguments)},ce=function(e){var t=e.openDialog,n=e.handleOpeningDialog,r=e.showNutrientDataForm,a=e.createFoodData,o=e.setCreateFoodData,l=e.handleSubmit,i=e.setShowNutrientDataForm,s=(0,c.useState)(!1),u=s[0],d=s[1],m=function(e){var t;o(se(se({},a),((t={})[e.target.id]=e.target.value,t)))};return(0,c.useEffect)((function(){d(!1)}),[t]),c.createElement(c.Fragment,null,c.createElement(W.Z,{open:t,fullWidth:!0},c.createElement(G.Z,null,"Create Custom Food"),c.createElement("form",{onSubmit:l},c.createElement(H.Z,{sx:{p:0,width:"100%"}},r?c.createElement(ne,{handleNutritionInput:function(e){o((function(t){var n;return se(se({},t),{nutrition:se(se({},t.nutrition),(n={},n[e.target.id]=e.target.value,n))})}))},nutritionData:a.nutrition}):c.createElement(N.Z,{display:"flex",flexDirection:"column",gap:"10px"},c.createElement(J,{inputValue:a.brand_owner,title:"Brand owner",id:"brand_owner",textFieldError:!1,handleInputChange:m}),c.createElement(J,{inputValue:a.description,title:"Description",textFieldError:u,id:"description",handleInputChange:m}),c.createElement(Y.Z,null),c.createElement(f.Z,{spacing:2,direction:"row",alignItems:"center",justifyContent:"center",sx:{pl:"1rem",pr:"1rem"}},c.createElement(p.Z,{sx:{minWidth:"25%"},variant:"body2",align:"left"},"Serving Size"),c.createElement(Q.$,{inputValue:a.serving_size,handleNumberChange:m,label:"Amount per serving",id:"serving_size"}),c.createElement(ie,{servingSizeUnit:a.serving_size_unit,handleSelectChange:function(e){o(se(se({},a),{serving_size_unit:e.target.value}))}})))),c.createElement($.Z,null,c.createElement(K.Z,{onClick:n,color:"error"},"Cancel"),r?c.createElement(K.Z,{"data-testid":"create-food-btn","aria-label":"submit form to create a new food",type:"submit",color:"success"},"Submit"):c.createElement(K.Z,{"data-testid":"create-food-btn","aria-label":"submit form to create a new food",onClick:function(e){e.preventDefault(),""===a.description?d(!0):i(!r)},color:"info"},"Almost done")))))},ue=n(6540),de=n(3406),me=n(3150),he=n(8561),fe=n(8736),pe=n(6140),ge=n(3725),ye=n(5503),ve=n(813),be=n(336),Ee=n(7272),we=n(9994),Se=n(6501),Ze=function(e){var t=e.meal,n=e.currentDay,r=e.handleDeleteRow,o=(0,c.useState)(!1),i=o[0],s=o[1];return c.createElement(c.Fragment,null,c.createElement(fe.Z,{hover:!1,sx:{"& > *":{borderBottom:"unset"}}},c.createElement(Ee.Z,null,c.createElement(a.Z,{enterDelay:600,enterNextDelay:1200,title:"View item's nutrition facts"},c.createElement(l.Z,{"aria-label":"expand row",size:"small",onClick:function(e){e.stopPropagation(),s(!i)}},i?c.createElement(ve.Z,null):c.createElement(ye.Z,null)))),c.createElement(Ee.Z,null,(0,Se.O)(t.brand_owner,t.description)),c.createElement(Ee.Z,null,Number(t.serving_size)*Number(t.servings)," ",t.serving_size_unit),c.createElement(Ee.Z,null,t.nutrition.calories," kcal"),c.createElement(Ee.Z,null,c.createElement(a.Z,{enterDelay:600,enterNextDelay:1200,title:"Delete item"},c.createElement(l.Z,{"aria-label":"delete from food log",size:"small",onClick:function(){return r(t.meal_id,n)}},c.createElement(be.Z,{color:"error"}))))),c.createElement(we.K,{open:i,nutrition:t.nutrition,serving_size:100,showStandardizedCol:!1}))},xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},xe.apply(this,arguments)},Ce=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},De=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},Ae=function(e){var t=e.meals,n=e.setOpenAlert,r=e.setAlertSeverity,a=e.setAlertMessage,o=e.setFoodLogItems,l=e.currentDay,i=e.slotName,d=e.setNutritionSummary,m=e.handleOpeningDialog,h=e.slot,g=e.setCreateFoodData,y=e.createFoodData,v=(0,u.s0)(),b=function(e,t){return Ce(void 0,void 0,void 0,(function(){var l,i;return De(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,s().delete("/api/foodLog/".concat(e),{params:{currentDay:t},withCredentials:!0})];case 1:return l=c.sent(),o(l.data.updatedItems),d(l.data.updatedNutritionSummary),r("success"),a("Food item has been deleted"),n(!0),[3,3];case 2:return i=c.sent(),console.error("err: ",i),r("error"),a("Unable to delete item. Please try again later."),n(!0),[3,3];case 3:return[2]}}))}))};return c.createElement(c.Fragment,null,c.createElement(de.Z,{component:X.Z},c.createElement(me.Z,{"aria-label":"Food items for ".concat(i)},c.createElement(he.Z,null,c.createElement(fe.Z,null,c.createElement(ge.Y,{sx:{fontWeight:"bold"},variant:"head"},i),c.createElement(ge.Y,{variant:"head"}),c.createElement(ge.Y,{variant:"head"}),c.createElement(ge.Y,{variant:"head"}),c.createElement(ge.Y,{variant:"head"}))),c.createElement(pe.Z,null,t.map((function(e){return c.createElement(Ze,{key:e.fdc_id,meal:e,currentDay:l,handleDeleteRow:b})})))),c.createElement(f.Z,{sx:{p:"5px"},alignItems:"center",direction:"row"},c.createElement(K.Z,{onClick:function(){return v("/home/search")}},c.createElement(ue.Z,{fontSize:"small"}),c.createElement(p.Z,{variant:"overline"},"Add Food")),c.createElement(K.Z,{variant:"text",color:"secondary",onClick:function(){g(xe(xe({},y),{slot:h})),m()}},c.createElement(ue.Z,{fontSize:"small"}),c.createElement(p.Z,{variant:"overline"},"Add Custom Food")))))},Fe=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},ke=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},Ie=function(e){var t=e.foodLogItems,n=e.setFoodLogItems,r=e.setOpenAlert,a=e.setAlertSeverity,o=e.setAlertMessage,l=e.currentDay,i=e.setNutritionSummary,u=(0,c.useState)(!1),d=u[0],m=u[1],h=(0,c.useState)(!1),p=h[0],g=h[1],y={date:l,slot:1,data_type:"custom",servings:1,brand_owner:"",description:"",serving_size:100,serving_size_unit:"g",nutrition:{calories:"",total_fat:"",saturated_fat:"",trans_fat:"",cholesterol:"",sodium:"",potassium:"",total_carbohydrates:"",dietary_fiber:"",total_sugars:"",protein:"",calcium:"",iron:"",vitamin_d:""}},v=(0,c.useState)(y),b=v[0],E=v[1],w=[],S=[],Z=[],x=[];t.length&&t.forEach((function(e){1===e.slot?w.push(e):2===e.slot?S.push(e):3===e.slot?Z.push(e):x.push(e)}));var C=function(){m(!d),setTimeout((function(){g(!1)}),1e3)},D=["Morning","Afternoon","Evening","Snack"],A=[1,2,3,4],F=[w,S,Z,x];return c.createElement(c.Fragment,null,c.createElement(f.Z,{direction:"column",spacing:4,sx:{width:"100%"}},F.map((function(e,t){return c.createElement(Ae,{key:t,slotName:D[t],meals:e,setOpenAlert:r,setAlertSeverity:a,setAlertMessage:o,setFoodLogItems:n,currentDay:l,setNutritionSummary:i,handleOpeningDialog:C,setCreateFoodData:E,createFoodData:b,slot:A[t]})})),c.createElement(ce,{openDialog:d,showNutrientDataForm:p,setShowNutrientDataForm:g,handleOpeningDialog:C,setCreateFoodData:E,createFoodData:b,handleSubmit:function(e){return Fe(void 0,void 0,void 0,(function(){var t,l;return ke(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),e.preventDefault(),a("success"),o("Custom food has been added to your food log!"),[4,s().post("/api/foodLog/custom",b)];case 1:return t=c.sent(),n(t.data.updatedFoodLogItems),r(!0),i(t.data.updatedNutritionSummary),E(y),C(),[3,3];case 2:return l=c.sent(),a("error"),o("Unable to add custom food to your food log"),r(!0),C(),console.error(l),[3,3];case 3:return[2]}}))}))}})))},Me=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},_e=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},Oe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];const Le=function(e){var t=e.setAlertMessage,n=e.setOpenAlert,r=e.setAlertSeverity,a=e.setNutritionSummary,o=e.setFoodLogItems,l=e.setIsSearching,i=e.foodLogItems,u=(0,c.useState)((0,M.Z)(Date.now())),d=u[0],m=u[1],h=c.useState(new Date(Date.now())),g=h[0],y=h[1],v=(0,c.useState)((0,I.Z)(new Date(Date.now()),"yyyy-MM-dd")),b=v[0],E=v[1];(0,c.useEffect)((function(){w()}),[b]);var w=function(){return Me(void 0,void 0,void 0,(function(){var e,i;return _e(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,s().get("/api/foodLog/day",{params:{date:b},withCredentials:!0})];case 1:return 0===(e=c.sent()).data.foodLogItems.length&&(r("info"),t("You have no items saved on this day for your food log."),n(!0)),o(e.data.foodLogItems),a(e.data.nutritionSummary),l(!1),[3,3];case 2:return i=c.sent(),console.error(i),[3,3];case 3:return[2]}}))}))},S=function(e){var t=e.split("-");return{year:t[0],month:t[1],day:t[2]}};return c.createElement(c.Fragment,null,c.createElement("div",{className:"food-log-page"},c.createElement(L.T,{currentDay:b}),c.createElement("div",{className:"food-log-page-main-content"},c.createElement(f.Z,{direction:"row",spacing:{xs:1,sm:4},alignItems:"space-evenly"},c.createElement(f.Z,{direction:"row",spacing:.5,sx:{width:"50%"},justifyContent:"space-between"},c.createElement(D.Z,null),c.createElement(p.Z,{variant:"body1"},"Change the current day by navigating through the tabs, or change the week by using the calendar dropdown to the right")),c.createElement(B,{currentDay:b,setCurrentDay:E,setDayIndex:m,value:g,setValue:y})),c.createElement("div",{className:"tabs-container"},c.createElement(A.Z,{value:d,onChange:function(e,t){var n,r=t-d,a=S(b),o=a.year,l=a.month,i=a.day;r>0?n=(0,k.Z)(new Date("".concat(o,", ").concat(l,", ").concat(i)),r):r<0&&(n=function(e,t){(0,_.Z)(2,arguments);var n=(0,O.Z)(t);return(0,k.Z)(e,-n)}(new Date("".concat(o,", ").concat(l,", ").concat(i)),Math.abs(r))),void 0!==n&&(y(n),m(t),E((0,I.Z)(n,"yyyy-MM-dd")))},variant:"scrollable",scrollButtons:"auto","aria-label":"change FoodLog date"},Oe.map((function(e){return c.createElement(F.Z,{key:e,label:e})})))),c.createElement(Ie,{setFoodLogItems:o,currentDay:b,foodLogItems:i,setOpenAlert:n,setAlertSeverity:r,setAlertMessage:t,setNutritionSummary:a}))))};var Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ne.apply(this,arguments)},ze=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},Pe=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};const Re=function(){var e=(0,u.s0)(),t=(0,C.a)(),n=t.isLoggedIn,i=t.isLoading,m=(0,c.useState)({}),h=m[0],f=m[1],p=(0,c.useState)(!1),g=p[0],y=p[1],v=(0,c.useState)([]),b=v[0],E=v[1],w=(0,c.useState)(!1),S=w[0],Z=w[1],D=(0,c.useState)(!1),A=D[0],F=D[1],k=(0,c.useState)(""),I=k[0],M=k[1],_=(0,c.useState)([]),O=_[0],L=_[1],N=(0,c.useState)(!1),z=N[0],P=N[1],R=(0,c.useState)({}),j=R[0],T=R[1],q=(0,c.useState)(!1),V=q[0],U=q[1],B=(0,c.useState)("error"),W=B[0],G=B[1],H=(0,c.useState)({query:"",category:"",allergy:"",minCalories:"",maxCalories:"",minCarbs:"",maxCarbs:"",minProtein:"",maxProtein:"",minFat:"",maxFat:"",number:10,offset:0}),Y=H[0],$=H[1],K=function(){y(!g)},J=function(e){return ze(void 0,void 0,void 0,(function(){var t,n,r,a;return Pe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),e.preventDefault(),U(!0),t=Ne(Ne({},Y),{offset:0}),$(t),F(!0),V?[4,s().get("/api/food",{params:t,withCredentials:!0})]:[3,2];case 1:return r=o.sent(),[3,4];case 2:return[4,s().get("/api/food/all",{params:t,withCredentials:!0})];case 3:r=o.sent(),o.label=4;case 4:return 0===(n=r).data.length?(M("No options matched your search. Try again with a broader search"),G("warning"),Z(!0),P(!1)):(G("success"),M("Success! Here are your matching items."),Z(!0),n.data.length<10?P(!1):P(!0),E(n.data)),F(!1),[3,6];case 5:return a=o.sent(),F(!1),G("error"),M("Unable to get search results. Please try again later."),Z(!0),console.error(a),[3,6];case 6:return[2]}}))}))};return(0,c.useEffect)((function(){if(!1===n&&!1===i)e("/",{state:{showError:!1},replace:!0});else{var t={goal:"weight_loss",total_calories:0,total_carbohydrates:0,total_protein:0,total_fat:0};s().get("/api/goals").then((function(n){""===n.data?(f(t),e("/home/macrocalculator")):f(n.data)})).catch((function(e){console.error(e)}))}}),[]),c.createElement(c.Fragment,null,!i&&Object.keys(h).length>0?c.createElement(x,{mobileOpen:g,handleDrawerToggle:K,isSearching:A,goals:h,searchResults:b,nutritionSummary:j,handleSubmit:J,values:Y,setValues:$,setAlertMessage:M,setAlertSeverity:G,setIsSearching:F,setOpenAlert:Z,setShowLoadMoreBtn:P,setSearchResults:E,setSendAdvancedRequest:U}):null,c.createElement(a.Z,{title:"Open Sidebar"},c.createElement(o.Z,{sx:{display:{sm:"none"}}},c.createElement(l.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:K,sx:{mr:2,display:{sm:"none"}}},c.createElement(r.Z,null)))),c.createElement(u.Z5,null,c.createElement(u.AW,{path:"",element:c.createElement(c.Fragment,null,c.createElement(Le,{setAlertMessage:M,setOpenAlert:Z,setAlertSeverity:G,setNutritionSummary:T,setFoodLogItems:L,foodLogItems:O,setIsSearching:F}))})),c.createElement(u.j3,{context:{isSearching:A,handleLoadMore:function(){return ze(void 0,void 0,void 0,(function(){var e,t,n,r;return Pe(this,(function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),F(!0),e=Ne(Ne({},Y),{offset:Y.offset+10}),$(e),V?[4,s().get("/api/food",{params:e,withCredentials:!0})]:[3,2];case 1:return n=a.sent(),[3,4];case 2:return[4,s().get("/api/food/all",{params:e,withCredentials:!0})];case 3:n=a.sent(),a.label=4;case 4:return(t=n).data.length<10?P(!1):P(!0),E(b.concat(t.data)),F(!1),[3,6];case 5:return r=a.sent(),F(!1),console.error(r),[3,6];case 6:return[2]}}))}))},setAlertMessage:M,setIsSearching:F,setOpenAlert:Z,setAlertSeverity:G,showLoadMoreBtn:z,setNutritionSummary:T,searchResults:b,goals:h,setGoals:f,handleSubmit:J,values:Y,setValues:$,setShowLoadMoreBtn:P,setSearchResults:E,setSendAdvancedRequest:U}}),c.createElement(d.I,{openAlert:S,handleAlert:function(){Z(!1)},alertSeverity:W,alertMessage:I}))}},3785:(e,t,n)=>{n.d(t,{U:()=>b});var r=n(8991),a=n(9144),o=n(1647),l=n(5293),i=n(214),s=n(7294),c=n(3837),u=n(5305),d=n(9669),m=n.n(d),h=n(8262),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{s(r.next(e))}catch(e){o(e)}}function i(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},y=function(e){var t=e.values,n=e.handleInputChange,r=e.setValues,o=e.setAlertMessage,l=e.setAlertSeverity,i=e.setIsSearching,c=e.setOpenAlert,d=e.setShowLoadMoreBtn,y=e.setSearchResults,v=e.setSendAdvancedRequest;return s.createElement(s.Fragment,null,s.createElement("form",{onSubmit:function(e){return p(void 0,void 0,void 0,(function(){var n,a,s;return g(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e.preventDefault(),"/api/food/all",i(!0),v(!1),n=f(f({},t),{offset:0}),r(n),[4,m().get("/api/food/all",{params:n})];case 1:return 0===(a=u.sent()).data.length?(o("No options matched your search. Try again with a broader search"),l("warning"),c(!0),d(!1)):(l("success"),o("Success! Here are your matching items."),c(!0),a.data.length<6?d(!1):d(!0),y(a.data)),i(!1),[3,3];case 2:return s=u.sent(),i(!1),l("error"),o("Unable to get search results. Please try again later."),c(!0),console.error(s),[3,3];case 3:return[2]}}))}))}},s.createElement(a.Z,{spacing:3},s.createElement(h.v,{query:t.query,id:"query",handleInputChange:n,helperText:"Search by food"}),s.createElement(u.Z,{type:"submit",variant:"contained"},"Submit"))))},v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)},b=function(e){var t=e.handleSubmit,n=e.values,u=e.setValues,d=e.goals,m=e.setAlertMessage,h=e.setAlertSeverity,f=e.setIsSearching,p=e.setOpenAlert,g=e.setShowLoadMoreBtn,b=e.setSearchResults,E=e.setSendAdvancedRequest,w=(0,s.useState)("advanced-search"),S=w[0],Z=w[1],x=function(e){var t;u(v(v({},n),((t={})[e.target.id]=e.target.value,t)))};return s.createElement("div",{className:"search-form"},s.createElement(a.Z,{direction:"row",spacing:1},s.createElement(r.Z,null),s.createElement(o.Z,{variant:"body1"},"Search from a list of over 350,000 foods to find the ones that match your nutrient goals")),s.createElement(l.Z,{value:S,onChange:function(e,t){Z(t)},"aria-label":"toggle suggested search",className:"search-form-tabs",indicatorColor:"secondary",textColor:"secondary"},s.createElement(i.Z,{value:"advanced-search",label:"Advanced"}),s.createElement(i.Z,{value:"simple-search",label:"Simple"})),"advanced-search"===S?s.createElement(c.c,{values:n,handleSubmit:t,handleInputChange:x,goals:d,handleRadioClick:function(e){e.target.value===n.allergy?u(v(v({},n),{allergy:""})):u(v(v({},n),{allergy:e.target.value}))}}):s.createElement(y,{values:n,handleInputChange:x,setValues:u,setAlertMessage:m,setAlertSeverity:h,setIsSearching:f,setOpenAlert:p,setShowLoadMoreBtn:g,setSearchResults:b,setSendAdvancedRequest:E}))}}}]);