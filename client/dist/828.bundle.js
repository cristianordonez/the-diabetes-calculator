"use strict";(self.webpackChunkthe_macro_trainer=self.webpackChunkthe_macro_trainer||[]).push([[828],{8991:(e,t,a)=>{var n=a(4836);t.Z=void 0;var r=n(a(4938)),l=a(5893),s=(0,r.default)((0,l.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4ZM4 16V6h16v10.01L4 16Zm5.0967-6.0469c0-1.027.836-1.864 1.864-1.864 1.027 0 1.864.837 1.864 1.864 0 1.027-.837 1.864-1.864 1.864-1.028 0-1.864-.837-1.864-1.864Zm7.032 4.236-2.482-2.482c.331-.505.527-1.107.527-1.754 0-1.772-1.441-3.213-3.213-3.213s-3.214 1.441-3.214 3.213 1.442 3.214 3.214 3.214c.636 0 1.225-.192 1.724-.511l2.489 2.488.955-.955Z"}),"ScreenSearchDesktop");t.Z=s},1974:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(3379),r=a(8790),l=a(4384),s=a(130),o=a(9669),c=a.n(o),i=a(7294),u=a(9250),h=a(1275),d=a(724),m=a(7012),g=a(9144),p=a(1647),f=a(3785),v=a(6332),y=a(1898),S=function(e){var t=e.nutritionSummary,a=e.goals;return i.createElement("div",{className:"daily-goals"},i.createElement(p.Z,{variant:"h6"},"Today's Macronutrient Totals"),void 0!==t.total_calories?i.createElement(i.Fragment,null,i.createElement(v.G,{calories:parseInt(t.total_calories),goalCalories:a.total_calories}),i.createElement("div",{className:"daily-goals-items","data-testid":"foodLog-goal-items"},i.createElement(y.z,{type:"Carbohydrates",nutrientsInFoodLog:parseInt(t.total_carbohydrates),nutrientsTotal:a.total_carbohydrates}),i.createElement(y.z,{nutrientsInFoodLog:parseInt(t.total_protein),nutrientsTotal:a.total_protein,type:"Protein"}),i.createElement(y.z,{nutrientsTotal:a.total_fat,type:"Fat",nutrientsInFoodLog:parseInt(t.total_fat)}))):null)},b=a(6021),E=a(2085),w=function(e){var t,a,n=e.goals,r=e.nutritionSummary,l=e.setGoals,s=e.handleSubmitUpdatedGoals;return void 0!==r&&r.length&&(t=r[5].amount,a=n.total_calories,Math.floor(t/a*100)),i.createElement(i.Fragment,null,i.createElement("div",{className:"daily-goals"},i.createElement(p.Z,{variant:"h6"},"Your Daily Macronutrient Goals"),void 0!==n?i.createElement(i.Fragment,null,i.createElement(b.H,{goals:n}),i.createElement("form",{onSubmit:s,className:"daily-goals-items"},i.createElement(E.Y,{goals:n,setGoals:l}))):null))},A=a(727),x=function(e){var t,a=e.mobileOpen,n=e.handleDrawerToggle,r=e.searchResults,o=e.goals,c=e.isSearching,h=e.nutritionSummary,v=e.handleSubmit,y=e.values,b=e.setValues,E=e.setAlertMessage,x=e.setAlertSeverity,M=e.setIsSearching,Z=e.setOpenAlert,I=e.setShowLoadMoreBtn,C=e.setSearchResults,O=e.setSendAdvancedRequest,k=(0,u.TH)();return t="/home"===k.pathname?"foodlog":"/home/search"===k.pathname?"search":"other",i.createElement(i.Fragment,null,i.createElement(i.Fragment,null,i.createElement(m.ZP,{variant:"temporary",open:a,onClose:n,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:350,pt:"1rem",pb:"1rem"}}},i.createElement(l.Z,null,i.createElement(s.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:n,sx:{mr:2,display:{sm:"none"}}},i.createElement(d.Z,null))),i.createElement(g.Z,{sx:{width:"100%",pb:"3rem"},direction:"row",spacing:2,justifyContent:"center",alignItems:"center"},i.createElement(A.F,null)),"search"===t&&void 0!==r&&r.length>0?i.createElement(f.U,{handleSubmit:v,values:y,setValues:b,goals:o,setAlertMessage:E,setAlertSeverity:x,setIsSearching:M,setOpenAlert:Z,setShowLoadMoreBtn:I,setSearchResults:C,setSendAdvancedRequest:O}):null," ","foodlog"!==t&&null!=r&&0===r.length?i.createElement(w,{goals:o}):null,"foodlog"===t&&void 0!==h?i.createElement(S,{goals:o,nutritionSummary:h}):null,"other"===t&&null!=r&&r.length>0?i.createElement(w,{goals:o}):null,c?i.createElement(p.Z,{align:"center",variant:"h6",sx:{pt:"1rem"}},"Searching..."):null),i.createElement(m.ZP,{open:!0,variant:"permanent",ModalProps:{keepMounted:!0},sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:350,pt:"1rem"}}},i.createElement(g.Z,{sx:{width:"100%",pb:"3rem"},direction:"row",spacing:2,justifyContent:"center",alignItems:"center"},i.createElement(A.F,null)),"search"===t&&void 0!==r&&r.length>0?i.createElement(f.U,{handleSubmit:v,values:y,setValues:b,goals:o,setAlertMessage:E,setAlertSeverity:x,setIsSearching:M,setOpenAlert:Z,setShowLoadMoreBtn:I,setSearchResults:C,setSendAdvancedRequest:O}):null," ","foodlog"!==t&&null!=r&&0===r.length?i.createElement(w,{goals:o}):null,"other"===t&&null!=r&&r.length>0?i.createElement(w,{goals:o}):null,"foodlog"===t&&void 0!==h?i.createElement(S,{goals:o,nutritionSummary:h}):null,c?i.createElement(p.Z,{align:"center",variant:"h6",sx:{pt:"1rem"}},"Searching..."):null)))},M=a(1566),Z=a(2393),I=function(){return I=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},I.apply(this,arguments)},C=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function o(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},O=function(e,t){var a,n,r,l,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(l){return function(o){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){s.label=l[1];break}if(6===l[0]&&s.label<r[1]){s.label=r[1],r=l;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(l);break}r[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}};const k=function(){var e=(0,u.s0)(),t=(0,M.a)(),a=t.isLoggedIn,o=t.isLoading,d=(0,i.useState)({}),m=d[0],g=d[1],p=(0,i.useState)(!1),f=p[0],v=p[1],y=(0,i.useState)([]),S=y[0],b=y[1],E=(0,i.useState)(!1),w=E[0],A=E[1],k=(0,i.useState)(!1),L=k[0],R=k[1],_=(0,i.useState)(""),F=_[0],P=_[1],T=(0,i.useState)([]),q=T[0],j=T[1],N=(0,i.useState)(!1),B=N[0],V=N[1],D=(0,i.useState)({}),G=D[0],H=D[1],U=(0,i.useState)(!1),z=U[0],Y=U[1],W=(0,i.useState)("error"),J=W[0],K=W[1],Q=(0,i.useState)({query:"",category:"",allergy:"",minCalories:"",maxCalories:"",minCarbs:"",maxCarbs:"",minProtein:"",maxProtein:"",minFat:"",maxFat:"",number:10,offset:0}),X=Q[0],$=Q[1],ee=function(){v(!f)},te=function(e){return C(void 0,void 0,void 0,(function(){var t,a,n,r;return O(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),e.preventDefault(),Y(!0),t=I(I({},X),{offset:0}),$(t),R(!0),z?[4,c().get("/api/food",{params:t,withCredentials:!0})]:[3,2];case 1:return n=l.sent(),[3,4];case 2:return[4,c().get("/api/food/all",{params:t,withCredentials:!0})];case 3:n=l.sent(),l.label=4;case 4:return 0===(a=n).data.length?(P("No options matched your search. Try again with a broader search"),K("warning"),A(!0),V(!1)):(K("success"),P("Success! Here are your matching items."),A(!0),a.data.length<10?V(!1):V(!0),b(a.data)),R(!1),[3,6];case 5:return r=l.sent(),R(!1),K("error"),P("Unable to get search results. Please try again later."),A(!0),console.log(r),[3,6];case 6:return[2]}}))}))};return(0,i.useEffect)((function(){if(!1===a&&!1===o)e("/",{state:{showError:!1},replace:!0});else{var t={goal:"weight_loss",total_calories:0,total_carbohydrates:0,total_protein:0,total_fat:0};c().get("/api/goals").then((function(a){""===a.data?(g(t),e("/home/macrocalculator")):g(a.data)})).catch((function(e){console.log(e)}))}}),[]),i.createElement(i.Fragment,null,!o&&Object.keys(m).length>0?i.createElement(x,{mobileOpen:f,handleDrawerToggle:ee,isSearching:L,goals:m,searchResults:S,nutritionSummary:G,handleSubmit:te,values:X,setValues:$,setAlertMessage:P,setAlertSeverity:K,setIsSearching:R,setOpenAlert:A,setShowLoadMoreBtn:V,setSearchResults:b,setSendAdvancedRequest:Y}):null,i.createElement(r.Z,{title:"Open Sidebar"},i.createElement(l.Z,{sx:{display:{sm:"none"}}},i.createElement(s.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:ee,sx:{mr:2,display:{sm:"none"}}},i.createElement(n.Z,null)))),i.createElement(u.Z5,null,i.createElement(u.AW,{path:"",element:i.createElement(i.Fragment,null,i.createElement(Z.default,{setAlertMessage:P,setOpenAlert:A,setAlertSeverity:K,setNutritionSummary:H,setFoodLogItems:j,foodLogItems:q,setIsSearching:R}))})),i.createElement(u.j3,{context:{isSearching:L,handleLoadMore:function(e){return C(void 0,void 0,void 0,(function(){var e,t,a,n;return O(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),R(!0),e=I(I({},X),{offset:X.offset+10}),$(e),z?[4,c().get("/api/food",{params:e,withCredentials:!0})]:[3,2];case 1:return a=r.sent(),[3,4];case 2:return[4,c().get("/api/food/all",{params:e,withCredentials:!0})];case 3:a=r.sent(),r.label=4;case 4:return(t=a).data.length<10?V(!1):V(!0),b(S.concat(t.data)),R(!1),[3,6];case 5:return n=r.sent(),R(!1),console.log(n),[3,6];case 6:return[2]}}))}))},setAlertMessage:P,setIsSearching:R,setOpenAlert:A,setAlertSeverity:K,showLoadMoreBtn:B,setNutritionSummary:H,searchResults:S,goals:m,setGoals:g,handleSubmit:te,values:X,setValues:$,setShowLoadMoreBtn:V,setSearchResults:b,setSendAdvancedRequest:Y}}),i.createElement(h.I,{openAlert:w,handleAlert:function(e){A(!1)},alertSeverity:J,alertMessage:F}))}},3785:(e,t,a)=>{a.d(t,{U:()=>S});var n=a(8991),r=a(9144),l=a(1647),s=a(5293),o=a(214),c=a(7294),i=a(3837),u=a(5305),h=a(9669),d=a.n(h),m=a(8262),g=function(){return g=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)},p=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function s(e){try{c(n.next(e))}catch(e){l(e)}}function o(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))},f=function(e,t){var a,n,r,l,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(l){return function(o){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){s.label=l[1];break}if(6===l[0]&&s.label<r[1]){s.label=r[1],r=l;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(l);break}r[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],n=0}finally{a=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}},v=function(e){var t=e.values,a=e.handleInputChange,n=e.setValues,l=e.setAlertMessage,s=e.setAlertSeverity,o=e.setIsSearching,i=e.setOpenAlert,h=e.setShowLoadMoreBtn,v=e.setSearchResults,y=e.setSendAdvancedRequest;return c.createElement(c.Fragment,null,c.createElement("form",{onSubmit:function(e){return p(void 0,void 0,void 0,(function(){var a,r,c;return f(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e.preventDefault(),"/api/food/all",o(!0),y(!1),a=g(g({},t),{offset:0}),n(a),[4,d().get("/api/food/all",{params:a})];case 1:return 0===(r=u.sent()).data.length?(l("No options matched your search. Try again with a broader search"),s("warning"),i(!0),h(!1)):(s("success"),l("Success! Here are your matching items."),i(!0),r.data.length<6?h(!1):h(!0),v(r.data)),o(!1),[3,3];case 2:return c=u.sent(),o(!1),s("error"),l("Unable to get search results. Please try again later."),i(!0),console.log(c),[3,3];case 3:return[2]}}))}))}},c.createElement(r.Z,{spacing:3},c.createElement(m.v,{query:t.query,id:"query",handleInputChange:a,helperText:"Search by food"}),c.createElement(u.Z,{type:"submit",variant:"contained"},"Submit"))))},y=function(){return y=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},y.apply(this,arguments)},S=function(e){var t=e.handleSubmit,a=e.values,u=e.setValues,h=e.goals,d=e.setAlertMessage,m=e.setAlertSeverity,g=e.setIsSearching,p=e.setOpenAlert,f=e.setShowLoadMoreBtn,S=e.setSearchResults,b=e.setSendAdvancedRequest,E=(0,c.useState)("advanced-search"),w=E[0],A=E[1],x=function(e){var t;u(y(y({},a),((t={})[e.target.id]=e.target.value,t)))};return c.createElement("div",{className:"search-form"},c.createElement(r.Z,{direction:"row",spacing:1},c.createElement(n.Z,null),c.createElement(l.Z,{variant:"body1"},"Search from a list of over 350,000 foods to find the ones that match your nutrient goals")),c.createElement(s.Z,{value:w,onChange:function(e,t){A(t)},"aria-label":"toggle suggested search",className:"search-form-tabs",indicatorColor:"secondary",textColor:"secondary"},c.createElement(o.Z,{value:"advanced-search",label:"Advanced"}),c.createElement(o.Z,{value:"simple-search",label:"Simple"})),"advanced-search"===w?c.createElement(i.c,{values:a,handleSubmit:t,handleInputChange:x,handleTypeSelect:function(e){u(y(y({},a),{category:e.target.value}))},goals:h,handleRadioClick:function(e){e.target.value===a.allergy?u(y(y({},a),{allergy:""})):u(y(y({},a),{allergy:e.target.value}))}}):c.createElement(v,{values:a,handleInputChange:x,setValues:u,setAlertMessage:d,setAlertSeverity:m,setIsSearching:g,setOpenAlert:p,setShowLoadMoreBtn:f,setSearchResults:S,setSendAdvancedRequest:b}))}}}]);