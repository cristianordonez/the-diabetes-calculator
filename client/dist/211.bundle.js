"use strict";(self.webpackChunkthe_diabetes_calculator=self.webpackChunkthe_diabetes_calculator||[]).push([[211],{4229:(e,t,r)=>{var n=r(5318);t.Z=void 0;var a=n(r(4938)),l=r(5893),o=(0,a.default)((0,l.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");t.Z=o},41:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(7294),a=r(1380),l=r(3696),o=r(6447),c=r(2658),u=r(9669),i=r.n(u),s=r(9125),f=r(1566),p=r(4229),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},h=function(e,t,r,n){return new(r||(r=Promise))((function(a,l){function o(e){try{u(n.next(e))}catch(e){l(e)}}function c(e){try{u(n.throw(e))}catch(e){l(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,c)}u((n=n.apply(e,t||[])).next())}))},b=function(e,t){var r,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};const g=function(){var e=(0,f.useAuth)(),t=e.isLoading,r=(e.isLoggedIn,e.username),u=(0,n.useState)(!1),g=u[0],y=u[1],m=(0,n.useState)("error"),v=m[0],w=m[1],_=(0,n.useState)(""),E=_[0],S=_[1],k=(0,n.useState)({}),x=k[0],M=k[1];(0,n.useEffect)((function(){i().get("/api/metrics").then((function(e){M(e.data)})).catch((function(e){S("Could not retrieve your daily goals. Please try again later."),w("error"),y(!0)}))}),[]);return t?null:n.createElement(n.Fragment,null,n.createElement(s.Z,{isLoggedIn:!0,isSettingsPage:!0}),n.createElement("div",{className:"user-profile-page"},n.createElement(o.Z,{direction:"row",spacing:1,sx:{paddingBottom:"1rem"}},n.createElement(p.Z,null),n.createElement(c.Z,{variant:"body1",align:"center"},"Welcome to your account, ",r,"! Edit your macronutrient goals to a custom amount (calories will be calculated based on your input).")),n.createElement(a.N,{goals:x,page:"user-profile",setGoals:M,handleSubmitUpdatedGoals:function(e){return h(void 0,void 0,void 0,(function(){var t,r,n;return b(this,(function(a){switch(a.label){case 0:e.preventDefault(),a.label=1;case 1:return a.trys.push([1,3,,4]),t=Math.floor(4*x.total_carbohydrates+4*x.total_protein+9*x.total_fat),r=t<=450?0:t/3-150,n=d(d({},x),{total_calories:t,min_calories_per_meal:Math.floor(r),max_calories_per_meal:Math.floor(t/3+150)}),M(n),[4,i().put("/api/metrics",n)];case 2:return 201===a.sent().status&&(S("Your Macronutrient goals have been updated!"),w("success"),y(!0)),[3,4];case 3:return a.sent(),S("Could not update goals. Please try again."),w("error"),y(!0),[3,4];case 4:return[2]}}))}))}}),n.createElement(l.I,{openAlert:g,handleAlert:function(){y(!g)},alertSeverity:v,alertMessage:E})))}}}]);